{"version":3,"sources":["../node_modules/chialab-callback-manager/src/callback-manager.js","../src/exceptions/out-of-history.js","../src/history.js","../src/exceptions/not-started.js","../node_modules/systemjs-plugin-babel/babel-helpers/possibleConstructorReturn.js","../node_modules/systemjs-plugin-babel/babel-helpers/inherits.js","../node_modules/systemjs-plugin-babel/babel-helpers/classCallCheck.js","../node_modules/systemjs-plugin-babel/babel-helpers/createClass.js","../src/exceptions/router.js","../src/exceptions/not-found.js","../src/router.js","../index.js"],"names":["CallbackManager","callbacks","proto","that","this","on","args","Array","_len","_key","arguments","apply","concat","off","_len2","_key2","trigger","_len3","_key3","obj","name","callback","objCallbacks","evtCallbacks","length","len","id","destroy","undefined","clbs","i","call","k","hasOwnProperty","reset","_len4","_key4","clb","fn","RouterException","_5","OutOfHistoryException","_RouterException","createState","state","title","url","type","timestamp","Date","now","_","_4","History","cb","attachToPrototype","index","entries","shift","Promise","reject","current","resolve","go","slice","reverse","stateObj","push","RouterNotStartedException","self","ReferenceError","subClass","superClass","TypeError","prototype","Object","create","setPrototypeOf","__proto__","instance","Constructor","defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","protoProps","staticProps","message","original","err","Function","bind","Error","defaultMessage","originalError","constructor","exceptionName","RouterNotFoundException","_onChange","ctx","path","routes","some","filter","parser","normalize","CALLBACKS","forEach","debounce","delay","t","setTimeout","onPopState","ev","history","Event","HISTORY","io","indexOfState","getPathFromBase","newState","pushState","document","replaceState","_path","bindWindow","_onPopState","addEventListener","unbindWindow","removeEventListener","_onHashChange","_a","_b","IS_BROWSER","window","LOCATION","location","ORIGIN_REGEX","routerCount","Router","options","started","DEFAULTS","base","replace","re","RegExp","match","href","split","getPathFromRoot","force","shouldReplace","back","forward","debouncedEmit","dispatch","q","v","_c"],"mappings":"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","file":"router.js"}