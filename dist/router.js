!function(a){function b(a,b,c){a in i||(i[a]={name:a,declarative:!0,deps:b,declare:c,normalizedDeps:b})}function c(a){return n[a]||(n[a]={name:a,dependencies:[],exports:{},importers:[]})}function d(b){if(!b.module){var e=b.module=c(b.name),f=b.module.exports,g=b.declare.call(a,function(a,b){if(e.locked=!0,"object"==typeof a)for(var c in a)f[c]=a[c];else f[a]=b;for(var d=0,g=e.importers.length;g>d;d++){var h=e.importers[d];if(!h.locked)for(var i=0;i<h.dependencies.length;++i)h.dependencies[i]===e&&h.setters[i](f)}return e.locked=!1,b},b.name);e.setters=g.setters,e.execute=g.execute;for(var j=0,k=b.normalizedDeps.length;k>j;j++){var l,m=b.normalizedDeps[j],o=i[m],p=n[m];p?l=p.exports:o&&!o.declarative?l=o.esModule:o?(d(o),p=o.module,l=p.exports):l=h(m),p&&p.importers?(p.importers.push(e),e.dependencies.push(p)):e.dependencies.push(null),e.setters[j]&&e.setters[j](l)}}}function e(b){var c={};if(("object"==typeof b||"function"==typeof b)&&b!==a)if(k)for(var d in b)"default"!==d&&f(c,b,d);else{var e=b&&b.hasOwnProperty;for(var d in b)"default"===d||e&&!b.hasOwnProperty(d)||(c[d]=b[d])}return c["default"]=b,m(c,"__useDefault",{value:!0}),c}function f(a,b,c){try{var d;(d=Object.getOwnPropertyDescriptor(b,c))&&m(a,c,d)}catch(e){return a[c]=b[c],!1}}function g(b,c){var d=i[b];if(d&&!d.evaluated&&d.declarative){c.push(b);for(var e=0,f=d.normalizedDeps.length;f>e;e++){var k=d.normalizedDeps[e];-1==j.call(c,k)&&(i[k]?g(k,c):h(k))}d.evaluated||(d.evaluated=!0,d.module.execute.call(a))}}function h(a){if(p[a])return p[a];if("@node/"==a.substr(0,6))return o(a.substr(6));var b=i[a];if(!b)throw"Module "+a+" not present.";return d(i[a]),g(a,[]),i[a]=void 0,b.declarative&&m(b.module.exports,"__esModule",{value:!0}),p[a]=b.declarative?b.module.exports:b.esModule}var i={},j=Array.prototype.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},k=!0;try{Object.getOwnPropertyDescriptor({a:0},"a")}catch(l){k=!1}var m;!function(){try{Object.defineProperty({},"a",{})&&(m=Object.defineProperty)}catch(a){m=function(a,b,c){try{a[b]=c.value||c.get.call(a)}catch(d){}}}}();var n={},o="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&require.resolve&&"undefined"!=typeof process&&require,p={"@empty":{}};return function(a,c,d,f){return function(g){g(function(g){for(var i=0;i<c.length;i++)(function(a,b){b&&b.__esModule?p[a]=b:p[a]=e(b)})(c[i],arguments[i]);f({register:b});var j=h(a[0]);if(a.length>1)for(var i=1;i<a.length;i++)h(a[i]);return d?j["default"]:j})}}}("undefined"!=typeof self?self:global)(["1"],[],!0,function(a){this.require,this.exports,this.module;a.register("2",["3","4"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){c=a["default"]},function(a){d=a["default"]}],execute:function(){a("CallbackManager",e=function(){function a(){c(this,a),this.callbacks={}}return d(a,[{key:"attachToPrototype",value:function(a){var b=this;a.on=function(){for(var a=arguments.length,c=Array(a),d=0;a>d;d++)c[d]=arguments[d];return b.on.apply(b,[this].concat(c))},a.off=function(){for(var a=arguments.length,c=Array(a),d=0;a>d;d++)c[d]=arguments[d];return b.off.apply(b,[this].concat(c))},a.trigger=function(){for(var a=arguments.length,c=Array(a),d=0;a>d;d++)c[d]=arguments[d];return b.trigger.apply(b,[this].concat(c))}}},{key:"on",value:function(a,b,c){if("string"==typeof a&&"function"==typeof b&&(c=b,b=a,a=this),"function"==typeof c){var d=this.callbacks[a]=this.callbacks[a]||{},e=d[b]=d[b]||{length:0},f=e.length;return e[f]={fn:c,destroy:function(a,b){return function(){"undefined"!=typeof a[b]&&delete a[b]}}(d[b],f)},e.length+=1,this.callbacks[a][b][f].destroy}return null}},{key:"off",value:function(a){var b=arguments.length<=1||void 0===arguments[1]?null:arguments[1];"string"==typeof a&&(b=a,a=this);var c=this.callbacks[a];if(c)if(b){var d=c[b];for(var e in d)"object"==typeof d[e]&&"function"==typeof d[e].destroy&&d[e].destroy.call(a)}else for(var f in c)c.hasOwnProperty(f)&&this.reset(f)}},{key:"trigger",value:function(a,b){"string"==typeof a&&(b=a,a=this);for(var c=this.callbacks[a]||{},d=c[b]||{},e=arguments.length,f=Array(e>2?e-2:0),g=2;e>g;g++)f[g-2]=arguments[g];for(var h in d)if(d.hasOwnProperty(h)){var i=d[h];"object"==typeof i&&"function"==typeof i.fn&&i.fn.apply(a,f)}}}]),a}()),a("CallbackManager",e)}}}),a.register("5",["3","4","6","7","8"],function(a,b){"use strict";var c,d,e,f,g,h;return{setters:[function(a){c=a["default"]},function(a){d=a["default"]},function(a){e=a["default"]},function(a){f=a["default"]},function(a){g=a.RouterException}],execute:function(){a("OutOfHistoryException",h=function(a){function b(){return c(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),d(b,[{key:"defaultMessage",get:function(){return"Out of history navigation."}},{key:"exceptionName",get:function(){return"OutOfHistoryException"}}]),b}(g)),a("OutOfHistoryException",h)}}}),a.register("9",["2","3","4","5"],function(a,b){"use strict";function c(a,b,c,d){return a=a||{},a.timestamp=Date.now(),{state:a,title:b,url:c,type:d}}var d,e,f,g,h;return{setters:[function(a){f=a.CallbackManager},function(a){d=a["default"]},function(a){e=a["default"]},function(a){g=a.OutOfHistoryException}],execute:function(){a("History",h=function(){function a(){d(this,a);var b=new f;b.attachToPrototype(this),this.reset()}return e(a,[{key:"reset",value:function(){this.index=-1,this.entries=[]}},{key:"go",value:function(a){if(0!==a){var b=this.index+a;if(0>b||b>=this.entries.length)return Promise.reject(new g);this.index=b,this.trigger("popstate",this.current)}return Promise.resolve(this.current)}},{key:"back",value:function(){return this.go(-1)}},{key:"forward",value:function(){return this.go(1)}},{key:"indexOfState",value:function(a){a=a||{};for(var b=this.entries.slice(0).reverse(),c=0,d=b.length;d>c;c++)if(b[c].state.timestamp===a.timestamp)return c;return-1}},{key:"pushState",value:function(a,b,d){var e=c(a,b,d,"push");return this.entries=this.entries.slice(0,this.index+1),this.entries.push(e),this.go(1),this.trigger("popstate",e),e}},{key:"replaceState",value:function(a,b,d){var e=c(a,b,d,"replace");return this.entries[this.index]=e,e}},{key:"current",get:function(){return this.entries[this.index]}},{key:"length",get:function(){return this.entries.length}}]),a}()),a("History",h)}}}),a.register("a",["3","4","6","7","8"],function(a,b){"use strict";var c,d,e,f,g,h;return{setters:[function(a){c=a["default"]},function(a){d=a["default"]},function(a){e=a["default"]},function(a){f=a["default"]},function(a){g=a.RouterException}],execute:function(){a("RouterNotStartedException",h=function(a){function b(){return c(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),d(b,[{key:"defaultMessage",get:function(){return"Router has not been started yet."}},{key:"exceptionName",get:function(){return"RouterNotStartedException"}}]),b}(g)),a("RouterNotStartedException",h)}}}),a.register("6",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",function(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b})}}}),a.register("7",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",function(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)})}}}),a.register("3",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")})}}}),a.register("4",[],function(a,b){"use strict";return{setters:[],execute:function(){a("default",function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}())}}}),a.register("8",["3","4"],function(a,b){"use strict";var c,d,e;return{setters:[function(a){c=a["default"]},function(a){d=a["default"]}],execute:function(){a("RouterException",e=function(){function a(b,d){c(this,a);for(var e=arguments.length,f=Array(e>2?e-2:0),g=2;e>g;g++)f[g-2]=arguments[g];var h=new(Function.prototype.bind.apply(Error,[null].concat([b],f)));return"undefined"==typeof b?h.message=this.defaultMessage:b instanceof Error&&(d=b,h.message=this.defaultMessage),d&&(h.originalError=d,h.message=h.message+", from "+d.name+": "+d.message+"."),h.name=this.constructor.exceptionName,Object.setPrototypeOf(h,this.constructor.prototype),h}return d(a,[{key:"defaultMessage",get:function(){return"Generic Router error"}},{key:"exceptionName",get:function(){return"RouterException"}}]),a}()),a("RouterException",e)}}}),a.register("b",["3","4","6","7","8"],function(a,b){"use strict";var c,d,e,f,g,h;return{setters:[function(a){c=a["default"]},function(a){d=a["default"]},function(a){e=a["default"]},function(a){f=a["default"]},function(a){g=a.RouterException}],execute:function(){a("RouterNotFoundException",h=function(a){function b(){return c(this,b),e(this,Object.getPrototypeOf(b).apply(this,arguments))}return f(b,a),d(b,[{key:"defaultMessage",get:function(){return"Router rule has not been found."}},{key:"exceptionName",get:function(){return"RouterNotFoundException"}}]),b}(g)),a("RouterNotFoundException",h)}}}),a.register("c",["3","4","9","a","b"],function(a,b){"use strict";function c(a,b){a.routes.some(function(c){var d=a.parser(a.normalize(b),a.normalize(c));if(null!==d){var e=q[a.id]&&q[a.id][c]||[];return e.forEach(function(b){b.apply(a,d)}),!0}return!1})}function d(a,b){var c=arguments.length<=2||void 0===arguments[2]?0:arguments[2],d=void 0;return function(){clearTimeout(d),d=setTimeout(b.bind(a),c)}}function e(a){var b=this.history;if(a instanceof Event){var c=n.state,d=b.indexOfState(c);if(-1!==d){var e=b.length-b.index-1-d;b.go(e)}else{var f=this.getPathFromBase(),g=b.pushState(null,document.title,f);n.replaceState(g,document.title,this.resolve(f))}}else if(!n.state||n.state.timestamp!==b.current.state.timestamp){var h=this.resolve(a.url);"push"===a.type?n.pushState(a.state,a.title,h):n.replaceState(a.state,a.title,h)}}function f(){var a=this.history.current,b=this.resolve(a.url);n.replaceState(a.state,a.title,b),this._onPopState=e.bind(this),this.history.on("popstate",this._onPopState),window.addEventListener("popstate",this._onPopState)}function g(){this._onPopState&&(this.history.off("popstate",this._onPopState),window.removeEventListener("popstate",this._onPopState),delete this._onPopState,delete this._onHashChange)}var h,i,j,k,l,m,n,o,p,q,r,s;return{setters:[function(a){h=a["default"]},function(a){i=a["default"]},function(a){j=a.History},function(a){k=a.RouterNotStartedException},function(a){l=a.RouterNotFoundException}],execute:function(){m="undefined"!=typeof window&&"function"==typeof window.addEventListener,n=m&&window.history,o=m&&(n&&n.location||window&&window.location),p=/^((https?|s?ftps?):\/+)?(.+?)(?=\/|$)/i,q={},r=0,a("Router",s=function(){function a(){var b=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];h(this,a),this.history=new j,this.started=!1,this.reset(),this.options={};for(var c in this.DEFAULTS)b.hasOwnProperty(c)?this.options[c]=b[c]:this.DEFAULTS.hasOwnProperty(c)&&(this.options[c]=this.DEFAULTS[c]);this.base=this.options.base,this.id=r,r++}return i(a,[{key:"DEFAULTS",get:function(){return{base:"#",dispatch:!0,bind:!0}}}]),i(a,[{key:"parser",value:function(a,b){b=b.replace(/\*/g,"([^/?#]+?)").replace(/\.\./,"(.*)");var c=new RegExp("^"+b+"$"),d=a.match(c);return d?d.slice(1):null}},{key:"reset",value:function(){delete q[this.id],this.routes=[]}},{key:"getPathFromBase",value:function(b){var c=this.base;return c&&"#"===c[0]?(b=b||o.href||"",b.split(c)[1]||""):(b=o?a.getPathFromRoot(b):b||"",b.replace(c,""))}},{key:"trigger",value:function(a){var b=this.history.current.url;return a||b!==this.current?(this.current=b,c(this,b),!0):!1}},{key:"on",value:function(a,b){a=this.normalize(a),a="/"+a,this.routes.push(a),q[this.id]=q[this.id]||{},q[this.id][a]=q[this.id][a]||[],q[this.id][a].push(b)}},{key:"navigate",value:function(a,b){var c=arguments.length<=2||void 0===arguments[2]?!1:arguments[2];return this.started?(a=this.normalize(a),c?this.history.replaceState(null,b,a):this.history.pushState(null,b,a),this.trigger()?Promise.resolve():Promise.reject(new l)):Promise.reject(new k)}},{key:"back",value:function(){return this.started?this.history.back():Promise.reject(new k)}},{key:"forward",value:function(){return this.started?this.history.forward():Promise.reject(new k)}},{key:"start",value:function(){this.started||(this.current=this.getPathFromBase(),this.history.pushState(null,document.title,this.current),this.started=!0,m&&(this.debouncedEmit=d(this,this.trigger,1).bind(this),this.history.on("popstate",this.debouncedEmit),this.options.dispatch&&this.trigger(!0),this.options.dispatch=!0,this.options.bind&&f.call(this)))}},{key:"stop",value:function(){this.started&&(this.history.reset(),this.history.off("popstate",this.debouncedEmit),this.reset(),g.call(this),this.started=!1)}},{key:"normalize",value:function(a){return a.replace(/^\/|\/$/,"")}},{key:"resolve",value:function(a){return(this.base+"/"+a).replace(/\/+/,"/")}},{key:"query",value:function(a){var b={};return a=a||this.current||this.getPathFromBase(),a.replace(/[?&](.+?)=([^&]*)/g,function(a,c,d){b[c]=d}),b}}],[{key:"getPathFromRoot",value:function(a){return a=a||o.href,a.replace(p,"")}}]),a}()),a("Router",s)}}}),a.register("1",["c"],function(a,b){"use strict";var c;return{setters:[function(a){c=a.Router}],execute:function(){a("default",c)}}})})(function(a){"function"==typeof define&&define.amd?define([],a):"object"==typeof module&&module.exports&&"function"==typeof require?module.exports=a():Router=a()});
//# sourceMappingURL=router.js.map